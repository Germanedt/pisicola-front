<!-- <h1>{{ dataService.productiveUnit.name }}</h1>
<nz-divider></nz-divider>
<nz-card nzTitle="Información general" class="card-header-light">
  <nz-row>
    <nz-col style="color: #8d375a">Dirección de la unidad productiva:</nz-col>
    <nz-col style="margin-left: 10px">{{
      dataService.productiveUnit.address
    }}</nz-col>
  </nz-row>
  <nz-row nzJustify="space-between">
    <nz-col>
      <p>
        <span style="color: #8d375a">Descripción de la unidad productiva:</span>
        {{ dataService.productiveUnit.description }}
      </p>
    </nz-col>
  </nz-row>
</nz-card>
<nz-divider></nz-divider>
<nz-card nzTitle="Cosechas" class="card-header-light">
  <nz-row nzJustify="space-between" nzGutter="16">
    <nz-col
      nzXs="24"
      nzSm="24"
      nzMd="12"
      nzLg="10"
      nzXl="8"
      class="nz-mb-2"
      *ngFor="let data of sowings"
    >
      <app-sowing-card
        [sowing]="data"
        [hasActions]="hasActions"
      ></app-sowing-card>
    </nz-col>
  </nz-row>
</nz-card>
<nz-divider></nz-divider>
<nz-card nzTitle="Últimos gastos" class="card-header-light">
  <nz-row nzJustify="space-between">
    <nz-table
      #nzTable
      [nzData]="expensesList"
      [nzBordered]="true"
      nzTableLayout="fixed"
    >
      <thead>
        <tr>
          <th>Concepto</th>
          <th>Valor</th>
          <th>Descripción</th>
          <th>Fecha de gasto</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let data of nzTable.data">
          <tr>
            <td>{{ data.name }}</td>
            <td>{{ data.value }}</td>
            <td>{{ data.note }}</td>
            <td>{{ formatFullDate(data.manual_created_at) }}</td>
            <td class="actions-container">
              <a
                nz-button
                nzType="primary"
                nzSize="default"
                class="edit-action"
                (click)="goToEditExpeses(data)"
              >
                <span nz-icon nzType="edit"></span>
              </a>
              <a
                nz-button
                nzType="primary"
                nzSize="default"
                class="delete-action"
                nz-popconfirm
                (nzOnConfirm)="handlerConfirmDelete(data.id)"
                nzPopconfirmTitle="¿Seguro desea eliminar el insumo?"
                nzOkText="Si, eliminar"
                nzCancelText="Cancelar"
              >
                <span nz-icon nzType="delete"></span>
              </a>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </nz-table>
  </nz-row>
</nz-card> -->

<ion-content color="light">
  <div class="unit-detail-page">
    <ion-text>
      <h1 class="unit-detail-page__heading-1">The Test Unit</h1>
    </ion-text>
    <ion-grid>
      <ion-row>
        <ion-col size="12">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Información general</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p>
                <ion-text color="primary"
                  >Dirección de la unidad productiva:</ion-text
                >
                {{ dataService.productiveUnit.address }}
              </p>
              <p>
                <ion-text color="primary"
                  >Descripción de la unidad productiva:</ion-text
                >
                {{ dataService.productiveUnit.description }}
              </p>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-text>
      <h1 class="unit-detail-page__heading-1">Cosechas</h1>
    </ion-text>
    <ion-grid>
      <ion-row>
        <ng-container *ngFor="let data of sowings">
          <ion-col size="12" size-lg="6" size-xl="4">
            <ion-card class="unit-detail-page__card">
              <div class="unit-detail-page__card-header">
                <h2 class="unit-detail-page__card-title m-0">
                  {{ data.fish_step?.fish?.name }}
                </h2>
                <ion-button
                  id="trigger-button-harvest-{{ data.id }}"
                  size="small"
                  >Opciones <ion-icon name="arrow-down-outline"></ion-icon
                ></ion-button>
                <ion-popover
                  trigger="trigger-button-harvest-{{ data.id }}"
                  triggerAction="click"
                  [dismissOnSelect]="true"
                >
                  <ng-template>
                    <ion-content>
                      <ion-list class="py-0">
                        <ion-item
                          [button]="true"
                          [detail]="false"
                          lines="none"
                          (click)="goToEditHarvest(data)"
                          ><ion-icon
                            slot="start"
                            name="pencil-outline"
                          ></ion-icon>
                          <ion-label>Editar</ion-label></ion-item
                        >
                        <ion-item
                          [button]="true"
                          [detail]="false"
                          lines="none"
                          (click)="gotToHarvest(data)"
                          ><ion-icon
                            slot="start"
                            name="stats-chart-outline"
                          ></ion-icon>
                          <ion-label>Ver Stats</ion-label></ion-item
                        >
                        <ion-item
                          [button]="true"
                          [detail]="false"
                          lines="none"
                          (click)="handlerConfirmDeleteHarvest(data.id)"
                          ><ion-icon
                            slot="start"
                            name="trash-outline"
                          ></ion-icon>
                          <ion-label>Eliminar</ion-label></ion-item
                        >
                        <ion-item
                          [button]="true"
                          [detail]="false"
                          lines="none"
                          (click)="handlerConfirmCloseHarvest(data.id)"
                          ><ion-icon
                            slot="start"
                            name="trash-outline"
                          ></ion-icon>
                          <ion-label>Cerrar cosecha</ion-label></ion-item
                        >
                      </ion-list>
                    </ion-content>
                  </ng-template>
                </ion-popover>
              </div>
              <div class="unit-detail-page__card-content">
                <ion-list>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="list-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label
                      ><b>Estanque: </b>{{ data.pond?.name }}</ion-label
                    >
                  </ion-item>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="list-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label
                      ><b>Etapa: </b>{{ data.fish_step?.name }}</ion-label
                    >
                  </ion-item>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="list-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label
                      ><b>Fecha: </b>{{ data.created_at | date }}</ion-label
                    >
                  </ion-item>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="list-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label
                      ><b>N° de peces: </b>{{ data.total_fish }}</ion-label
                    >
                  </ion-item>
                </ion-list>
              </div>
            </ion-card>
          </ion-col>
        </ng-container>
      </ion-row>
    </ion-grid>
    <ion-text>
      <h1 class="unit-detail-page__heading-1">Últimos gastos</h1>
    </ion-text>
    <ion-grid>
      <ion-row>
        <ng-container *ngFor="let data of expensesList">
          <ion-col size="12" size-lg="6" size-xl="4">
            <ion-card class="unit-detail-page__card">
              <div class="unit-detail-page__card-header">
                <ion-button
                  id="trigger-button-expense-{{ data.id }}"
                  size="small"
                  >Opciones <ion-icon name="arrow-down-outline"></ion-icon
                ></ion-button>
                <ion-popover
                  trigger="trigger-button-expense-{{ data.id }}"
                  triggerAction="click"
                  [dismissOnSelect]="true"
                >
                  <ng-template>
                    <ion-content>
                      <ion-list class="py-0">
                        <ion-item
                          [button]="true"
                          [detail]="false"
                          lines="none"
                          (click)="goToEditExpense(data)"
                          ><ion-icon
                            slot="start"
                            name="pencil-outline"
                          ></ion-icon>
                          <ion-label>Editar</ion-label></ion-item
                        >
                        <ion-item
                          [button]="true"
                          [detail]="false"
                          lines="none"
                          (click)="handlerConfirmDeleteExpense(data.id)"
                          ><ion-icon
                            slot="start"
                            name="trash-outline"
                          ></ion-icon>
                          <ion-label>Eliminar</ion-label></ion-item
                        >
                      </ion-list>
                    </ion-content>
                  </ng-template>
                </ion-popover>
              </div>
              <div class="unit-detail-page__card-content">
                <ion-list>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="list-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label><b>Concepto: </b>{{ data.name }}</ion-label>
                  </ion-item>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="mail-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label><b>Valor: </b>{{ data.value }}</ion-label>
                  </ion-item>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="list-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label><b>Descripción: </b>{{ data.note }}</ion-label>
                  </ion-item>
                  <ion-item lines="none">
                    <ion-icon
                      aria-hidden="true"
                      name="list-outline"
                      slot="start"
                    ></ion-icon>
                    <ion-label
                      ><b>Fecha de gasto: </b
                      >{{ formatFullDate(data.manual_created_at) }}</ion-label
                    >
                  </ion-item>
                </ion-list>
              </div>
            </ion-card>
          </ion-col>
        </ng-container>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>
